<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="theme-color" content="#0056b3">

    <link rel="icon" type="image/x-icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-9qVQpARFpnwkAI7FQoAMKmf2hoY4jIOt8Q&s">
    <link rel="icon" type="image/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-9qVQpARFpnwkAI7FQoAMKmf2hoY4jIOt8Q&s">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VWS REcords</title>
    <style>
        :root {
            --bg-body: #0f0f0f;
            --bg-panel: #181818;
            --primary: #ff4757;      /* Neon Red */
            --secondary: #ffa502;    /* Neon Gold */
            --text-main: #ffffff;
            --text-sub: #7f8c8d;
            --border: #333;
            --nav-height: 60px;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0; padding: 0;
            height: 100vh;
            display: flex; flex-direction: column;
            overflow: hidden; 
        }

        /* --- NAVBAR --- */
        .navbar {
            height: var(--nav-height); background: #000; border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
            flex-shrink: 0; z-index: 100;
        }
        .brand { font-size: 1.2rem; font-weight: 900; color: var(--primary); letter-spacing: 2px; }
        .nav-info { display: flex; align-items: center; font-size: 0.9rem; color: var(--text-sub); }

        /* --- LOGIN SCREEN --- */
        #login-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://pop.h-cdn.co/assets/16/37/480x270/hd-aspect-1473707349-corserbmw.GIF');
            background-size: cover; background-position: center; background-repeat: no-repeat;
            z-index: 5000; display: flex; align-items: center; justify-content: center;
        }
        .login-card {
            background: rgba(24, 24, 24, 0.95); padding: 30px; border-radius: 15px; border: 1px solid var(--primary);
            width: 90%; max-width: 400px; text-align: center; box-shadow: 0 0 20px rgba(255, 71, 87, 0.2); backdrop-filter: blur(5px);
        }

        /* --- GEAR LOADER --- */
        .gear-container { position: relative; width: 60px; height: 60px; margin: 20px auto; }
        .gear { position: absolute; border-radius: 50%; border: 4px dashed; box-sizing: border-box; }
        .gear-outer { top: 0; left: 0; width: 100%; height: 100%; border-color: var(--primary); animation: spin 4s linear infinite; }
        .gear-inner { top: 15px; left: 15px; width: 30px; height: 30px; border-color: var(--secondary); border-style: dotted; animation: spin-rev 2s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes spin-rev { 100% { transform: rotate(-360deg); } }

        /* --- MAIN LAYOUT (DESKTOP) --- */
        .main-layout { display: flex; flex: 1; height: calc(100vh - var(--nav-height) - 40px); overflow: hidden; }

        .panel-left { width: 30%; background: var(--bg-body); border-right: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; gap: 20px; justify-content: center; }
        .panel-mid { width: 40%; background: var(--bg-panel); border-right: 1px solid var(--border); padding: 30px; overflow-y: auto; position: relative; }
        .panel-right { width: 30%; background: #111; padding: 20px; overflow-y: auto; }

        /* --- MOBILE LAYOUT OVERRIDES --- */
        @media (max-width: 1024px) {
            .main-layout { display: block; height: auto; overflow-y: auto; padding-bottom: 90px; /* Fixed: Padding for Bottom Nav */ }
            .panel-left, .panel-right, .system-footer { display: none !important; } 
            .panel-mid { width: 100%; border: none; padding: 20px; display: none; } 
            .mobile-dash { display: block; padding: 20px; }
        }
        @media (min-width: 1025px) {
            .mobile-dash, .bottom-nav { display: none !important; }
        }

        /* --- COMPONENTS --- */
        .sys-btn {
            padding: 30px; border-radius: 15px; border: 1px solid var(--border);
            background: linear-gradient(145deg, #1e1e1e, #141414); cursor: pointer;
            transition: 0.3s; text-align: left; display: flex; align-items: center; gap: 20px;
        }
        .sys-btn:hover { border-color: var(--primary); transform: translateX(10px); }
        .sys-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .sys-icon { font-size: 2.5rem; }

        .input-group { margin-bottom: 20px; }
        label { display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 0.9rem; font-weight: bold; }
        input, textarea { 
            width: 100%; background: #222; border: 1px solid var(--border); color: white; 
            padding: 12px; border-radius: 8px; outline: none; box-sizing: border-box;
        }
        input:focus, textarea:focus { border-color: var(--secondary); }
        .btn-save { width: 100%; padding: 15px; background: var(--secondary); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: black; margin-top: 10px; }

        .hist-item {
            background: #1a1a1a; padding: 15px; margin-bottom: 10px; border-radius: 8px;
            border-left: 3px solid #555; display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; transition: 0.2s;
        }
        .hist-item:hover { background: #252525; }
        .hist-item.Service { border-left-color: var(--primary); }
        .hist-item.Fuel { border-left-color: var(--secondary); }
        
        .system-footer {
            height: 40px; background: #000; border-top: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #555;
            position: fixed; bottom: 0; width: 100%; z-index: 100;
        }

        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 70px;
            background: #111; border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center; z-index: 1000;
        }
        .nav-item {
            background: none; border: none; color: #666; font-size: 0.7rem; 
            display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        .nav-item.active { color: var(--primary); }
        .nav-item span { font-size: 1.5rem; }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9);
            z-index: 2000; display: none; align-items: flex-end; justify-content: center;
        }
        .modal-overlay.active { display: flex; }
        .modal-sheet {
            background: #1e1e1e; width: 100%; max-height: 90vh; border-radius: 20px 20px 0 0;
            padding: 25px; overflow-y: auto; animation: slideUp 0.3s;
        }
        @media (min-width: 1025px) {
            .modal-overlay { align-items: center; } 
            .modal-sheet { max-width: 500px; border-radius: 20px; animation: fadeIn 0.3s; }
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* VIEW MODE STYLES */
        .view-card { background:#222; border:1px solid #333; padding:20px; border-radius:10px; margin-top:10px; }
        .view-row { display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:10px; }
        .view-label { color:#888; }
        .view-val { font-weight:bold; color:white; }

        .hidden { display: none !important; }
        .tab-btn { padding: 10px; background: #222; border: 1px solid #333; color: #888; flex: 1; cursor: pointer; }
        .tab-btn.active { background: var(--primary); color: white; }
        
        #toast-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 6000; }
        .toast { background: white; color: black; padding: 10px 20px; border-radius: 20px; margin-bottom: 10px; font-weight: bold; }

    </style>
</head>
<body>

<nav class="navbar">
    <div class="brand">VWS SYSTEM</div>
    <div class="nav-info">
        <span id="navBike">--</span> <span style="margin:0 10px; opacity:0.3">|</span> 
        <span id="navRole" style="color:var(--secondary)">--</span>
        <button id="deskProfileBtn" class="hidden" onclick="openProfile()" style="background:none; border:1px solid var(--primary); color:var(--primary); padding:5px 15px; margin-left:15px; cursor:pointer; border-radius:4px;">Profile</button>
        <button onclick="logout()" style="background:none; border:1px solid #333; color:#fff; padding:5px 10px; margin-left:10px; cursor:pointer;">Exit</button>
    </div>
</nav>

<div id="toast-box"></div>

<div id="login-view">
    <div class="login-card">
        <div style="display:flex; margin-bottom:20px;">
            <button class="tab-btn active" onclick="switchLoginTab('mechanic')">MECHANIC</button>
            <button class="tab-btn" onclick="switchLoginTab('owner')">OWNER</button>
        </div>
        <h3 id="loginTitle" style="color:var(--primary);">Mechanic Login</h3>
        <input type="text" id="bikeInput" placeholder="TN01AA1234" style="text-align:center; font-size:1.2rem; text-transform:uppercase;" oninput="this.value=this.value.toUpperCase()">
        <div id="ownerAuth" class="hidden" style="margin-top:15px;">
            <input type="password" id="passInput" placeholder="Passcode" style="text-align:center;">
            <div style="display:flex; margin-top:10px; background:#fff; border-radius:5px; padding:5px;">
                <span id="captchaTxt" style="flex:1; color:black; font-family:monospace; font-size:1.2rem; letter-spacing:3px;">ABCD</span>
                <button onclick="genCaptcha()" style="border:none;background:none;">‚Üª</button>
            </div>
            <input type="text" id="captchaInput" placeholder="Enter Captcha" style="text-align:center; margin-top:5px; text-transform:uppercase;">
        </div>
        <button onclick="login()" class="btn-save" style="background:var(--primary); color:white; margin-top:20px;">ACCESS SYSTEM</button>
    </div>
</div>

<div class="main-layout" id="desktopLayout">
    
    <div class="panel-left">
        <div class="sys-btn" id="btnService" onclick="loadForm('Service')">
            <div class="sys-icon">üõ†Ô∏è</div>
            <div>
                <div style="font-weight:bold; font-size:1.2rem;">ADD SERVICE</div>
                <div style="color:var(--text-sub); font-size:0.8rem;">Maintenance Entry</div>
            </div>
        </div>
        <div class="sys-btn" id="btnFuel" onclick="loadForm('Fuel')">
            <div class="sys-icon">‚õΩ</div>
            <div>
                <div style="font-weight:bold; font-size:1.2rem;">ADD FUEL</div>
                <div style="color:var(--text-sub); font-size:0.8rem;">Mileage & Air Check</div>
            </div>
        </div>
    </div>

    <div class="panel-mid" id="middlePanel">
        <div style="text-align:center; margin-top:100px; color:#333;">
            <h1 style="font-size:4rem; margin:0;">‚öôÔ∏è</h1>
            <p>Select Action or View Record</p>
        </div>
    </div>

    <div class="panel-right" id="rightPanel">
        <div style="border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:15px; color:var(--text-sub);">RECENT ACTIVITY</div>
        
        <div id="loader" class="hidden" style="text-align:center;">
            <div class="gear-container"><div class="gear gear-outer"></div><div class="gear gear-inner"></div></div>
            <p style="color:#555; margin-top:5px;">Processing...</p>
        </div>

        <div id="desktopHistoryList"></div>
        <div id="desktopLock" class="hidden" style="text-align:center; padding:50px; opacity:0.3;">
            <h1>üîí</h1><p>Restricted Access</p>
        </div>
    </div>
</div>

<div class="mobile-dash hidden" id="mobileLayout">
    <div style="text-align:center; margin-top:50px;">
        <h1 style="color:var(--primary);">VWS MOBILE</h1>
        <p>Use the bottom menu to add records.</p>
        <div id="mobileLockMsg" class="hidden" style="margin-top:20px; color:#555;">Mechanic Login Active</div>
        <div id="mobLoader" class="hidden" style="text-align:center;">
            <div class="gear-container"><div class="gear gear-outer"></div><div class="gear gear-inner"></div></div>
        </div>
        <div id="mobileHistoryList" style="margin-top:20px; text-align:left;"></div>
    </div>
</div>

<div class="bottom-nav hidden" id="bottomNav">
    <button class="nav-item" onclick="openMobileModal('Service')"><span>üõ†Ô∏è</span>Service</button>
    <button class="nav-item" onclick="openMobileModal('Fuel')"><span>‚õΩ</span>Fuel</button>
    <button class="nav-item hidden" id="mobProfileBtn" onclick="openProfile()"><span>üë§</span>Profile</button>
</div>

<div class="modal-overlay" id="universalModal">
    <div class="modal-sheet">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <h2 id="univModalTitle" style="margin:0; color:var(--primary);">Entry</h2>
            <button onclick="closeModal()" style="background:none; border:none; color:white; font-size:1.5rem;">‚úï</button>
        </div>
        <div id="univModalContent"></div>
    </div>
</div>

<footer class="system-footer">
    VWS Records System v2.0 ‚Ä¢ Desktop Environment
</footer>

<script>
    // *************************
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyPv01sgxQxryXunrnr2Go7FGQjitar6AcCzlkbEBOn-UE88bEWi1sh8xR1Pr8xC24/exec'; // PASTE URL
    // *************************

    const SEP = '|||';
    let currentBike = "", isOwner = false, loginTab = 'mechanic', captchaVal = "";
    let globalData = [];

    window.onload = () => { genCaptcha(); };

    // --- LOGIN ---
    function switchLoginTab(mode) {
        loginTab = mode;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        if(mode === 'mechanic') {
            document.getElementById('ownerAuth').classList.add('hidden');
            document.getElementById('loginTitle').innerText = "Mechanic Login";
        } else {
            document.getElementById('ownerAuth').classList.remove('hidden');
            document.getElementById('loginTitle').innerText = "Owner Login";
            genCaptcha();
        }
    }

    function genCaptcha() {
        captchaVal = Math.random().toString(36).substring(2, 6).toUpperCase();
        document.getElementById('captchaTxt').innerText = captchaVal;
    }

    function login() {
        const bike = document.getElementById('bikeInput').value.trim().toUpperCase().replace(/\s/g,'');
        if(bike.length < 4) return toast("Invalid Bike No");

        if(loginTab === 'owner') {
            const pass = document.getElementById('passInput').value;
            const cap = document.getElementById('captchaInput').value.toUpperCase();
            if(cap !== captchaVal) { genCaptcha(); return toast("Wrong Captcha"); }
            if(pass !== bike.slice(-4)) return toast("Wrong Passcode");
            isOwner = true;
        } else { isOwner = false; }

        currentBike = bike;
        initInterface();
    }

    function initInterface() {
        document.getElementById('login-view').classList.add('hidden');
        document.getElementById('navBike').innerText = currentBike;
        document.getElementById('navRole').innerText = isOwner ? "OWNER" : "MECHANIC";

        // Desktop
        if(isOwner) {
            document.getElementById('deskProfileBtn').classList.remove('hidden');
            document.getElementById('desktopLock').classList.add('hidden');
            loadHistory('desktopHistoryList');
        } else {
            document.getElementById('deskProfileBtn').classList.add('hidden');
            document.getElementById('desktopLock').classList.remove('hidden');
        }

        // Mobile
        if(window.innerWidth <= 1024) {
            document.getElementById('mobileLayout').classList.remove('hidden');
            document.getElementById('bottomNav').classList.remove('hidden');
            if(isOwner) {
                document.getElementById('mobProfileBtn').classList.remove('hidden');
                loadHistory('mobileHistoryList');
            } else {
                document.getElementById('mobileLockMsg').classList.remove('hidden');
            }
        }
    }

    function logout() { location.reload(); }

    // --- FORMS ---
    function getFormHTML(type) {
        return `
            <div class="form-container">
                <h2 style="color:${type==='Service'?'var(--primary)':'var(--secondary)'}">${type} Entry</h2>
                <input type="hidden" id="activeType" value="${type}">
                <div class="input-group"><label>Date</label><input type="date" id="fDate" value="${new Date().toISOString().split('T')[0]}"></div>
                <div class="input-group"><label>Odometer</label><input type="number" id="fOdm" placeholder="KM"></div>
                ${type === 'Service' ? `
                <div class="input-group"><label>Description</label><textarea id="fDesc" rows="3"></textarea></div>
                <div class="input-group"><label>Mechanic Info</label><input type="text" id="fMech" placeholder="Name - Shop"></div>
                ` : `
                <div style="padding:15px; background:#222; margin-bottom:20px; border-radius:8px;">
                     <input type="checkbox" id="fAir" style="width:auto;"> <label style="display:inline;">Air Checked</label>
                </div>
                `}
                <div class="input-group"><label>Cost (‚Çπ)</label><input type="number" id="fCost"></div>
                <button class="btn-save" onclick="saveData()">SAVE RECORD</button>
            </div>
        `;
    }

    function loadForm(type) {
        document.getElementById('btnService').classList.remove('active');
        document.getElementById('btnFuel').classList.remove('active');
        document.getElementById('btn'+type).classList.add('active');
        document.getElementById('middlePanel').innerHTML = getFormHTML(type);
    }

    function openMobileModal(type) {
        document.getElementById('universalModal').classList.add('active');
        document.getElementById('univModalContent').innerHTML = getFormHTML(type);
        document.getElementById('univModalTitle').innerText = type;
        document.querySelector('#univModalContent h2').style.display = 'none';
    }

    // --- VIEW RECORD (Desktop Middle / Mobile Modal) ---
    function viewRecord(index) {
        const row = globalData[index];
        const type = row[0];
        let details = row[3];
        if(details.includes(SEP)) details = details.split(SEP).join('<br><span style="color:#666">Mech: </span>');

        const html = `
            <div class="view-card" style="border-left:5px solid ${type==='Service'?'var(--primary)':'var(--secondary)'}">
                <h2 style="color:${type==='Service'?'var(--primary)':'var(--secondary)'}; margin-top:0;">${type} Details</h2>
                <div class="view-row"><span class="view-label">Date</span><span class="view-val">${new Date(row[1]).toLocaleDateString()}</span></div>
                <div class="view-row"><span class="view-label">Odometer</span><span class="view-val">${row[2]} km</span></div>
                <div class="view-row" style="display:block">
                    <span class="view-label">Details</span><br>
                    <div class="view-val" style="margin-top:5px; line-height:1.5;">${details}</div>
                </div>
                <div class="view-row"><span class="view-label">Cost</span><span class="view-val" style="font-size:1.5rem; color:var(--secondary)">‚Çπ${row[4]}</span></div>
                ${isOwner ? `<button class="btn-save" style="background:#333; color:#ff4757; margin-top:20px;" onclick="deleteRec('${row[5]}')">DELETE RECORD</button>` : ''}
            </div>
        `;

        if(window.innerWidth > 1024) {
            document.getElementById('middlePanel').innerHTML = html;
        } else {
            document.getElementById('universalModal').classList.add('active');
            document.getElementById('univModalContent').innerHTML = html;
            document.getElementById('univModalTitle').innerText = "Details";
        }
    }

    // --- DATA HANDLING ---
    function saveData() {
        const type = document.getElementById('activeType').value;
        const payload = {
            action: 'saveRecord', bikeNumber: currentBike, type: type,
            date: document.getElementById('fDate').value,
            odometer: document.getElementById('fOdm').value,
            cost: document.getElementById('fCost').value
        };

        if(!payload.date || !payload.cost) return toast("Data Missing");
        if(type === 'Service') payload.details = (document.getElementById('fDesc').value || "-") + SEP + (document.getElementById('fMech').value || "-");
        else payload.airCheck = document.getElementById('fAir').checked ? "Checked" : "No";

        closeModal(); 
        
        const loader = window.innerWidth > 1024 ? document.getElementById('loader') : document.getElementById('mobLoader');
        loader.classList.remove('hidden');
        if(window.innerWidth > 1024) document.getElementById('middlePanel').innerHTML = "<div style='text-align:center;margin-top:50px;'>Saving...</div>";

        fetch(SCRIPT_URL, {method:'POST', mode:'no-cors', body:JSON.stringify(payload)})
        .then(() => {
            toast("Saved!");
            loader.classList.add('hidden');
            if(window.innerWidth > 1024) document.getElementById('middlePanel').innerHTML = '<div style="text-align:center;margin-top:100px;color:#333;"><h1>‚ö°</h1><p>Done.</p></div>';
            if(isOwner) refreshHistory();
        });
    }

    function refreshHistory() {
        loadHistory('desktopHistoryList');
        if(window.innerWidth <= 1024) loadHistory('mobileHistoryList');
    }

    function loadHistory(targetId) {
        const container = document.getElementById(targetId);
        container.innerHTML = "";
        
        // Cache Buster
        fetch(`${SCRIPT_URL}?bikeNumber=${currentBike}&reqType=history&t=${new Date().getTime()}`)
        .then(r => r.json())
        .then(data => {
            globalData = data.reverse(); // Store globally for View Mode
            if(data.length === 0) { container.innerHTML = "<p>No History</p>"; return; }
            
            data.forEach((row, index) => {
                let summary = row[3].split(SEP)[0];
                const div = document.createElement('div');
                div.className = `hist-item ${row[0]}`;
                div.onclick = () => viewRecord(index); // Click to View 40% Panel
                div.innerHTML = `
                    <div>
                        <div style="font-weight:bold; color:white;">${row[0]} <span style="font-size:0.8rem; color:#777;">${new Date(row[1]).toLocaleDateString()}</span></div>
                        <div style="color:#aaa; font-size:0.9rem;">${summary}</div>
                    </div>
                    <div style="font-weight:bold; color:var(--secondary);">‚Çπ${row[4]}</div>
                `;
                container.appendChild(div);
            });
        });
    }

    function deleteRec(id) {
        if(!confirm("Delete Permanently?")) return;
        closeModal();
        if(window.innerWidth > 1024) document.getElementById('middlePanel').innerHTML = "<div style='text-align:center;margin-top:50px;'>Deleting...</div>";
        
        fetch(SCRIPT_URL, {method:'POST', mode:'no-cors', body:JSON.stringify({action:'deleteRecord', bikeNumber:currentBike, id:id})})
        .then(() => { 
            toast("Deleted"); 
            refreshHistory(); 
            if(window.innerWidth > 1024) document.getElementById('middlePanel').innerHTML = '<div style="text-align:center;margin-top:100px;color:#333;"><h1>‚ö°</h1><p>Select Action</p></div>';
        });
    }

    // --- PROFILE ---
    function openProfile() {
        document.getElementById('universalModal').classList.add('active');
        document.getElementById('univModalContent').innerHTML = `
            <h3>Owner Profile</h3>
            <div class="input-group"><label>Name</label><input type="text" id="profName" placeholder="Loading..."></div>
            <div class="input-group"><label>License</label><input type="text" id="profDL"></div>
            <div class="input-group"><label>RC No</label><input type="text" id="profRC"></div>
            <div class="input-group"><label>Insurance</label><input type="text" id="profIns"></div>
            <button class="btn-save" onclick="saveProfile()">UPDATE PROFILE</button>
            <a href="https://www.digilocker.gov.in/" target="_blank" class="digilocker-btn" style="display:block;text-align:center;margin-top:10px;color:#2f80ed;text-decoration:none;">Open DigiLocker üáÆüá≥</a>
        `;
        document.getElementById('univModalTitle').innerText = "Profile";

        fetch(`${SCRIPT_URL}?bikeNumber=${currentBike}&reqType=profile&t=${new Date().getTime()}`)
        .then(r=>r.json()).then(d=>{
            if(d.name) {
                document.getElementById('profName').value = d.name;
                document.getElementById('profDL').value = d.license;
                document.getElementById('profRC').value = d.rc;
                document.getElementById('profIns').value = d.insurance;
            } else {
                document.getElementById('profName').placeholder = "Enter Name";
            }
        });
    }

    function saveProfile() {
        const payload = {
            action:'saveProfile', bikeNumber:currentBike,
            name: document.getElementById('profName').value,
            license: document.getElementById('profDL').value,
            rc: document.getElementById('profRC').value,
            insurance: document.getElementById('profIns').value
        };
        fetch(SCRIPT_URL, {method:'POST', mode:'no-cors', body:JSON.stringify(payload)})
        .then(() => { closeModal(); toast("Profile Updated"); });
    }

    function closeModal() { document.getElementById('universalModal').classList.remove('active'); }
    function toast(msg) {
        const d = document.createElement('div'); d.className='toast'; d.innerText=msg;
        document.getElementById('toast-box').appendChild(d); setTimeout(()=>d.remove(), 2500);
    }
</script>

</body>
</html>
